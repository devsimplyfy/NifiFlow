(function(g){var d=function(h){return typeof h==="undefined"};var f=function(h){return h===null};var e=function(h){return !d(h)&&!f(h)};var b=function(h){return d(h)||f(h)||h===""};var a=function(l,m,k){var h=l.data("options");var j=l.children("div.combo-text");var i;if(e(k)){g.each(h.options,function(n,o){if(k===o.value){i=o}})}if(d(i)){g.each(h.options,function(n,o){if(d(i)){i=o}if(m===o.text){i=o}})}if(e(i)){j.removeClass("selected-disabled-option").attr("title",i.text).text(i.text).data("text",i.text);if(i.disabled===true){j.addClass("selected-disabled-option")}l.data("selected-option",i);if(e(h.select)){h.select.call(l,i)}}};var c={init:function(h){return this.each(function(){if(e(h)&&e(h.options)){var i=g(this);i.empty().unbind().data("options",h);g('<div class="combo-text"></div>').appendTo(i);i.addClass("combo-button-normal pointer combo").hover(function(){i.removeClass("button-normal").addClass("combo-button-over")},function(){i.removeClass("button-over").addClass("combo-button-normal")}).click(function(k){var p=i.data("options");g(this).addClass("combo-open");var m=i.offset();var l=g("<div></div>").addClass("combo-options").css({position:"absolute",left:m.left+"px",top:(m.top+Math.round(i.outerHeight())-1)+"px",width:(Math.round(i.outerWidth())-2)+"px","overflow-y":"auto"});var n=0;var r=-1;if(e(p.maxHeight)){r=parseInt(p.maxHeight);if(r>0){l.css("max-height",r+"px")}}else{var j=g(window).height();r=j-(m.top+Math.round(i.outerHeight()))-32;l.css("max-height",r+"px")}var o=g("<ul></ul>").appendTo(l);g.each(p.options,function(t,u){var w=g('<span class="combo-option-text"></span>').attr("title",u.text).text(u.text);var v=g('<span class="hidden"></span>').text(u.value);var s=g("<li></li>").addClass(u.optionClass).append(w).append(v).appendTo(o);if(u.disabled===true){s.addClass("unset disabled-option")}else{s.click(function(){g(".combo").removeClass("combo-open");a(i,u.text,u.value);g(".combo-glass-pane").click()}).hover(function(){g(this).addClass("pointer").css("background","#eaeef0")},function(){g(this).removeClass("pointer").css("background","#ffffff")})}if(!b(u.description)){g('<div style="float: right; line-height: 32px;" class="fa fa-question-circle"></div>').appendTo(s).qtip({content:u.description,position:{at:"top center",my:"bottom center",adjust:{y:5}},style:{classes:"nifi-tooltip"},show:{solo:true,effect:function(x){g(this).slideDown(100)}},hide:{effect:function(x){g(this).slideUp(100)}}})}else{w.css("width","100%")}n+=16});var q=g('<div class="combo-glass-pane"></div>').one("click",function(){if(l.length!==0){l.find(".fa").each(function(){var t=g(this);if(t.data("qtip")){var s=t.qtip("api");s.destroy(true)}});l.remove();g(".combo").removeClass("combo-open")}g(this).remove()});g("body").append(l).append(q);k.stopPropagation()});g('<div class="combo-arrow fa fa-chevron-down"></div>').appendTo(i);if(e(h.selectedOption)){a(i,h.selectedOption.text,h.selectedOption.value)}else{a(i)}}})},getSelectedOption:function(){var h;this.each(function(){h=g(this).data("selected-option");return false});return h},setSelectedOption:function(h){return this.each(function(){a(g(this),h.text,h.value)})},setOptionEnabled:function(i,h){return this.each(function(){var k=g(this);var j=k.data("options");g.each(j.options,function(l,m){if(m.value===i.value){m.disabled=!h}})})},destroy:function(){return this.each(function(){g(this).empty().unbind().removeData();g("div.combo-glass-pane").click()})},close:function(){g("div.combo-glass-pane").click()}};g.fn.combo=function(h){if(c[h]){return c[h].apply(this,Array.prototype.slice.call(arguments,1))}else{return c.init.apply(this,arguments)}}})(jQuery);