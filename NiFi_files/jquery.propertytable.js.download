(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","Slick","nf.Common","nf.UniversalCapture","nf.Dialog","nf.Storage","nf.Client","nf.ErrorHandler","nf.ProcessGroupConfiguration","nf.Settings"],function(h,e,f,j,g,i,l,k,c,d){b(h,e,f,j,g,i,l,k,c,d)})}else{if(typeof exports==="object"&&typeof module==="object"){b(require("jquery"),require("Slick"),require("nf.Common"),require("nf.UniversalCapture"),require("nf.Dialog"),require("nf.Storage"),require("nf.Client"),require("nf.ErrorHandler"),require("nf.ProcessGroupConfiguration"),require("nf.Settings"))}else{b(a.$,a.Slick,a.nf.Common,a.nf.UniversalCapture,a.nf.Dialog,a.nf.Storage,a.nf.Client,a.nf.ErrorHandler,a.nf.ProcessGroupConfiguration,a.nf.Settings)}}}(this,function(e,r,h,q,n,f,x,g,l,w){var s="nfel";var j=s+"-editor";var k=null;var p=function(C){var D=this;var y="";var z;var B;var F;var E;var A;this.init=function(){var I=e("body");var H=e(C.grid.getContainerNode());var K=H.data("descriptors");B=K[C.item.property];z=C.item[C.column.field];F=e("<div></div>").addClass("slickgrid-editor").css({"z-index":100000,position:"absolute","border-radius":"2px","box-shadow":"rgba(0, 0, 0, 0.247059) 0px 2px 5px","background-color":"rgb(255, 255, 255)",overflow:"hidden",padding:"10px 20px",cursor:"move",transform:"translate3d(0px, 0px, 0px)"}).appendTo(I);A=e('<textarea hidefocus rows="5"/>').css({height:"80px",width:C.position.width+"px","min-width":"212px","margin-bottom":"5px","margin-top":"10px","white-space":"pre"}).tab().on("keydown",D.handleKeyDown).appendTo(F);F.draggable({cancel:".button, textarea, .nf-checkbox",containment:"parent"});var G=e('<div class="string-check-container">');G.appendTo(F);E=e('<div class="nf-checkbox string-check"/>').appendTo(G);e('<span class="string-check-label nf-checkbox-label">&nbsp;Set empty string</span>').appendTo(G);var J=e('<div class="button">Ok</div>').css({color:"#fff",background:"#728E9B"}).hover(function(){e(this).css("background","#004849")},function(){e(this).css("background","#728E9B")}).on("click",D.save);var L=e('<div class="secondary-button">Cancel</div>').css({color:"#004849",background:"#E3E8EB"}).hover(function(){e(this).css("background","#C7D2D7")},function(){e(this).css("background","#E3E8EB")}).on("click",D.cancel);e("<div></div>").css({position:"relative",top:"10px",left:"20px",width:"212px",clear:"both","float":"right"}).append(J).append(L).append('<div class="clear"></div>').appendTo(F);D.position(C.position);A.focus().select()};this.handleKeyDown=function(G){if(G.which===e.ui.keyCode.ENTER&&!G.shiftKey){D.save()}else{if(G.which===e.ui.keyCode.ESCAPE){D.cancel();G.stopImmediatePropagation();G.preventDefault()}}};this.save=function(){C.commitChanges()};this.cancel=function(){A.val(y);C.cancelChanges()};this.hide=function(){F.hide()};this.show=function(){F.show()};this.position=function(G){F.css({top:G.top-27,left:G.left-20})};this.destroy=function(){F.remove()};this.focus=function(){A.focus()};this.loadValue=function(I){var J=false;var G=h.isSensitiveProperty(B);if(h.isDefinedAndNotNull(I[C.column.field])){if(G){y=h.config.sensitiveText}else{y=I[C.column.field];J=y===""}}var H=J?"checkbox-checked":"checkbox-unchecked";E.addClass(H);if(G){A.addClass("sensitive").keydown(function(){var K=e(this);if(K.hasClass("sensitive")){K.removeClass("sensitive");if(K.val()===h.config.sensitiveText){K.val("")}}})}A.val(y);A.select()};this.serializeValue=function(){if(A.val()===""){if(E.hasClass("checkbox-checked")){return""}else{if(h.isRequiredProperty(B)){if(h.isBlank(B.defaultValue)){return z}else{return B.defaultValue}}else{return null}}}else{if(A.hasClass("sensitive")){return z}else{return A.val()}}};this.applyValue=function(G,H){G[C.column.field]=H};this.isValueChanged=function(){return D.serializeValue()!==z};this.validate=function(){return{valid:true,msg:null}};this.init()};var d=function(B){var D=this;var y="";var z;var A;var E;var F;var C;this.init=function(){var G=e("body");var J=e(B.grid.getContainerNode());var N=J.data("descriptors");A=N[B.item.property];var L=h.isSensitiveProperty(A);z=B.item[B.column.field];var H="nfel";var K=H+"-editor";F=e("<div></div>").addClass("slickgrid-nfel-editor").css({"z-index":14000,position:"absolute",padding:"10px 20px",overflow:"hidden","border-radius":"2px","box-shadow":"rgba(0, 0, 0, 0.247059) 0px 2px 5px","background-color":"rgb(255, 255, 255)",cursor:"move",transform:"translate3d(0px, 0px, 0px)"}).draggable({cancel:"input, textarea, pre, .nf-checkbox, .button, ."+K,containment:"parent"}).appendTo(G);C=e("<div></div>").addClass(K).appendTo(F).nfeditor({languageId:H,width:(B.position.width<212)?212:B.position.width,minWidth:212,minHeight:100,resizable:true,sensitive:L,escape:function(){D.cancel()},enter:function(){D.save()}});var I=e('<div class="string-check-container">');I.appendTo(F);E=e('<div class="nf-checkbox string-check"/>').appendTo(I);e('<span class="string-check-label nf-checkbox-label">&nbsp;Set empty string</span>').appendTo(I);var M=e('<div class="button">Ok</div>').css({color:"#fff",background:"#728E9B"}).hover(function(){e(this).css("background","#004849")},function(){e(this).css("background","#728E9B")}).on("click",D.save);var O=e('<div class="secondary-button">Cancel</div>').css({color:"#004849",background:"#E3E8EB"}).hover(function(){e(this).css("background","#C7D2D7")},function(){e(this).css("background","#E3E8EB")}).on("click",D.cancel);e("<div></div>").css({position:"relative",top:"10px",left:"20px",width:"212px",clear:"both","float":"right"}).append(M).append(O).append('<div class="clear"></div>').appendTo(F);D.position(B.position);C.nfeditor("focus").nfeditor("selectAll")};this.save=function(){B.commitChanges()};this.cancel=function(){C.nfeditor("setValue",y);B.cancelChanges()};this.hide=function(){F.hide()};this.show=function(){F.show();C.nfeditor("refresh")};this.position=function(G){F.css({top:G.top-21,left:G.left-43})};this.destroy=function(){C.nfeditor("destroy");F.remove()};this.focus=function(){C.nfeditor("focus")};this.loadValue=function(I){var J=false;var G=h.isSensitiveProperty(A);if(h.isDefinedAndNotNull(I[B.column.field])){if(G){y=h.config.sensitiveText}else{y=I[B.column.field];J=y===""}}var H=J?"checkbox-checked":"checkbox-unchecked";E.addClass(H);C.nfeditor("setValue",y).nfeditor("selectAll")};this.serializeValue=function(){var G=C.nfeditor("getValue");if(G===""){if(E.hasClass("checkbox-checked")){return""}else{if(h.isRequiredProperty(A)){if(h.isBlank(A.defaultValue)){return z}else{return A.defaultValue}}else{return null}}}else{if(C.nfeditor("isModified")===false){return z}else{return G}}};this.applyValue=function(G,H){G[B.column.field]=H};this.isValueChanged=function(){return D.serializeValue()!==z};this.validate=function(){return{valid:true,msg:null}};this.init()};var u=function(A){var B=this;var y=null;var D;var C;var z;this.init=function(){var F=e("body");var H=e(A.grid.getContainerNode());var M=H.data("descriptors");z=M[A.item.property];var O=H.closest(".property-container");var J=O.data("options");D=e('<div class="combo-editor"></div>').css({"z-index":1999,position:"absolute",padding:"10px 20px",overflow:"hidden","border-radius":"2px","box-shadow":"rgba(0, 0, 0, 0.247059) 0px 2px 5px","background-color":"rgb(255, 255, 255)",cursor:"move",transform:"translate3d(0px, 0px, 0px)"}).draggable({cancel:".button, .combo",containment:"parent"}).appendTo(F);var G=h.getAllowableValues(z);var P=[];if(z.required===false){P.push({text:"No value",value:null,optionClass:"unset"})}if(e.isArray(G)){e.each(G,function(R,S){var Q=S.allowableValue;P.push({text:Q.displayName,value:Q.value,disabled:S.canRead===false&&Q.value!==A.item.previousValue,description:h.escapeHtml(Q.description)})})}if(P.length===0){P.push({text:"No value",value:null,optionClass:"unset",disabled:true})}if(h.isDefinedAndNotNull(z.identifiesControllerService)){P.push({text:"Create new service...",value:undefined,optionClass:"unset"})}var I=A.position;var E=e(window).height();var L=E-I.bottom-16;C=e('<div class="value-combo combo"></div>').combo({options:P,maxHeight:L,select:function(Q){if(typeof Q.value==="undefined"){B.cancel();b(H,A.grid,A.item,z.identifiesControllerService,z.identifiesControllerServiceBundle,J)}}}).css({"margin-top":"10px","margin-bottom":"10px",width:((I.width-16)<212)?212:(I.width-16)+"px"}).appendTo(D);var N=e('<div class="secondary-button">Cancel</div>').css({color:"#004849",background:"#E3E8EB"}).hover(function(){e(this).css("background","#C7D2D7")},function(){e(this).css("background","#E3E8EB")}).on("click",B.cancel);var K=e('<div class="button">Ok</div>').css({color:"#fff",background:"#728E9B"}).hover(function(){e(this).css("background","#004849")},function(){e(this).css("background","#728E9B")}).on("click",B.save);e("<div></div>").css({position:"relative",top:"10px",left:"20px",width:"212px",clear:"both","float":"right"}).append(K).append(N).appendTo(D);B.position(I)};this.save=function(){A.commitChanges()};this.cancel=function(){A.cancelChanges()};this.hide=function(){D.hide()};this.show=function(){D.show()};this.position=function(E){D.css({top:E.top-24,left:E.left-20})};this.destroy=function(){C.combo("destroy");D.remove()};this.focus=function(){};this.loadValue=function(E){if(!h.isUndefined(E.value)){y=E.value;C.combo("setSelectedOption",{value:E.value})}else{if(h.isDefinedAndNotNull(z.defaultValue)){y=z.defaultValue;C.combo("setSelectedOption",{value:z.defaultValue})}}};this.serializeValue=function(){var E=C.combo("getSelectedOption");return E.value};this.applyValue=function(E,F){E[A.column.field]=F};this.isValueChanged=function(){var E=C.combo("getSelectedOption");return(!(E.value===""&&y===null))&&(E.value!==y)};this.validate=function(){return{valid:true,msg:null}};this.init()};var c=function(N,R,F,y){q.removeAllPropertyDetailDialogs();var M=N.getData();var G=M.getItem(F);if(h.isDefinedAndNotNull(G.value)){var H=R[G.property];if(!h.isSensitiveProperty(H)){var C=e(N.getCellNode(F,y));var D=C.offset();var E=e('<div class="property-detail"></div>').css({"z-index":1999,position:"absolute",padding:"10px 20px",overflow:"hidden","border-radius":"2px","box-shadow":"rgba(0, 0, 0, 0.247059) 0px 2px 5px","background-color":"rgb(255, 255, 255)",cursor:"move",transform:"translate3d(0px, 0px, 0px)",top:D.top-24,left:D.left-20}).appendTo("body");var z=h.getAllowableValues(H);if(e.isArray(z)){E.draggable({cancel:".button, .combo",containment:"parent"});var A=[];e.each(z,function(T,U){var S=U.allowableValue;A.push({text:S.displayName,value:S.value,description:h.escapeHtml(S.description),disabled:true})});if(A.length===0){A.push({text:"No value",value:null,optionClass:"unset",disabled:true})}var J=e(window).height();var O=J-(D.top+C.height())-16;var P=C.width()-16;e('<div class="value-combo combo"></div>').css({width:P,"margin-top":"10px","margin-bottom":"10px"}).combo({options:A,maxHeight:O,selectedOption:{value:G.value}}).appendTo(E);e('<div class="button">Ok</div>').css({position:"relative",top:"10px",left:"20px"}).hover(function(){e(this).css("background","#004849")},function(){e(this).css("background","#728E9B")}).on("click",function(){E.hide().remove()}).appendTo(E)}else{var B=null;if(h.supportsEl(H)){var Q="nfel";var I=Q+"-editor";E.css({"z-index":1999,position:"absolute",padding:"10px 20px",overflow:"hidden","border-radius":"2px","box-shadow":"rgba(0, 0, 0, 0.247059) 0px 2px 5px","background-color":"rgb(255, 255, 255)",cursor:"move",transform:"translate3d(0px, 0px, 0px)",top:D.top-22,left:D.left-43}).draggable({cancel:"input, textarea, pre, .button, ."+I,containment:"parent"});B=e("<div></div>").addClass(I).appendTo(E).nfeditor({languageId:Q,width:C.width(),content:G.value,minWidth:175,minHeight:100,readOnly:true,resizable:true,escape:function(){L()}})}else{E.css({"z-index":1999,position:"absolute",padding:"10px 20px",overflow:"hidden","border-radius":"2px","box-shadow":"rgba(0, 0, 0, 0.247059) 0px 2px 5px","background-color":"rgb(255, 255, 255)",cursor:"move",transform:"translate3d(0px, 0px, 0px)",top:D.top-26,left:D.left-20});e('<textarea hidefocus rows="5" readonly="readonly"/>').css({height:"80px",resize:"both",width:C.width()+"px",margin:"10px 0px","white-space":"pre"}).text(G.value).on("keydown",function(S){if(S.which===e.ui.keyCode.ESCAPE){L();S.stopImmediatePropagation();S.preventDefault()}}).appendTo(E);E.draggable({containment:"parent"})}var L=function(){if(B!==null){B.nfeditor("destroy")}E.hide().remove()};var K=e('<div class="button">Ok</div>').css({position:"relative",top:"10px",left:"20px"}).hover(function(){e(this).css("background","#004849")},function(){e(this).css("background","#728E9B")}).on("click",function(){L()});e("<div></div>").append(K).append('<div class="clear"></div>').appendTo(E)}}}};var b=function(y,A,B,C,z,D){e.ajax({type:"GET",url:"../nifi-api/flow/controller-service-types",data:{serviceType:C,serviceBundleGroup:z.group,serviceBundleArtifact:z.artifact,serviceBundleVersion:z.version},dataType:"json"}).done(function(F){var V=y.data("descriptors");var M=V[B.property];var T=d3.map();var K=[];e.each(F.controllerServiceTypes,function(W,X){T.set(W,X);K.push({text:h.formatType(X),value:W,description:h.escapeHtml(X.description)})});if(K.length===0){n.showOkDialog({headerText:"Controller Service",dialogContent:"No controller service types found that are applicable for this property."})}else{var R='<div id="new-inline-controller-service-dialog" class="hidden dialog medium-dialog cancellable"><div class="dialog-content"><div><div class="setting-name">Requires Controller Service</div><div class="setting-field"><div class="new-inline-controller-service-requirement"></div></div></div><div><div class="setting-name">Compatible Controller Services</div><div class="setting-field"><div class="new-inline-controller-service-combo"></div></div></div><div><div class="setting-name">Controller Service Name</div><div class="setting-field"><input type="text" class="new-inline-controller-service-name"/></div></div><div><div class="setting-name">Bundle</div><div class="setting-field"><div class="new-inline-controller-service-bundle"></div></div></div><div><div class="setting-name">Tags</div><div class="setting-field"><div class="new-inline-controller-service-tags"></div></div></div><div><div class="setting-name">Description</div><div class="setting-field"><div class="new-inline-controller-service-description"></div></div></div></div></div>';var Q=e(R).appendTo(D.dialogContainer);var G=Q.find("div.new-inline-controller-service-requirement");var N=Q.find("div.new-inline-controller-service-combo");var U=Q.find("input.new-inline-controller-service-name");var L=Q.find("div.new-inline-controller-service-bundle");var I=Q.find("div.new-inline-controller-service-tags");var S=Q.find("div.new-inline-controller-service-description");var H=h.formatType({type:M.identifiesControllerService,bundle:M.identifiesControllerServiceBundle});var P=h.formatBundle(M.identifiesControllerServiceBundle);G.text(H+" from "+P);K.sort(function(X,W){var Y=T.get(X.value);var ab=T.get(W.value);var aa=h.substringAfterLast(Y.type,".");var Z=h.substringAfterLast(ab.type,".");return aa===Z?-h.sortVersion(Y.bundle.version,ab.bundle.version):aa>Z?1:-1});var E=h.formatClassName(T.get(0));U.val(E);N.combo({options:K,select:function(X){var W=T.get(X.value);L.text(h.formatBundle(W.bundle));I.text(W.tags.join(", "));S.text(W.description);if(E===U.val().trim()){E=h.formatClassName(W);U.val(E)}}});Q.modal({headerText:"Add Controller Service",scrollableContentStyle:"scrollable",buttons:[{buttonText:"Create",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){O()}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){J()}}}]});var O=function(){var Y=N.combo("getSelectedOption").value;var Z=T.get(Y);var X=U.val();var W={revision:x.getRevision({revision:{version:0,}}),disconnectedNodeAcknowledged:f.isDisconnectionAcknowledged(),component:{type:Z.type,bundle:Z.bundle}};if(X.trim()!==""){W.component.name=X.trim()}var aa="../nifi-api/controller/controller-services";if(h.isDefinedAndNotNull(k)){aa="../nifi-api/process-groups/"+encodeURIComponent(k)+"/controller-services"}e.ajax({type:"POST",url:aa,data:JSON.stringify(W),dataType:"json",contentType:"application/json"}).done(function(ab){D.descriptorDeferred(B.property).done(function(af){var ae=af.propertyDescriptor;var ac=y.data("descriptors");if(!h.isUndefined(ac)){ac[ae.name]=ae}var ad=A.getData();ad.updateItem(B.id,e.extend(B,{value:ab.component.id}));Q.modal("hide")});if(typeof D.controllerServiceCreatedDeferred==="function"){D.controllerServiceCreatedDeferred(ab)}}).fail(g.handleAjaxError)};var J=function(){Q.modal("hide")};Q.modal("show")}}).fail(g.handleAjaxError)};var v=function(G,H){var D=function(R,P,O,L,J){var N=30;var I=e("<div></div>");var K=e("<span/>").addClass("table-cell").text(O).appendTo(I);if(J.type==="required"){K.addClass("required")}var Q=G.data("descriptors");var M=Q[J.property];if(h.isDefinedAndNotNull(M)){if(!h.isBlank(M.description)||!h.isBlank(M.defaultValue)||!h.isBlank(M.supportsEl)){e('<div class="fa fa-question-circle" alt="Info" style="float: right;"></div>').appendTo(I);e('<span class="hidden property-descriptor-name"></span>').text(J.property).appendTo(I);N=46}}K.width(L.width-N).ellipsis();return I.html()};var E=function(S,Q,P,L,I){var O;if(h.isDefinedAndNotNull(P)){var R=G.data("descriptors");var N=R[I.property];if(h.isSensitiveProperty(N)){O='<span class="table-cell sensitive">Sensitive value set</span>'}else{var K=false;var J=h.getAllowableValues(N);if(e.isArray(J)){e.each(J,function(T,V){var U=V.allowableValue;if(P===U.value){P=U.displayName;K=true;return false}})}if(P===""){O='<span class="table-cell blank">Empty string set</span>'}else{if(!K&&h.isDefinedAndNotNull(N.identifiesControllerService)){O='<span class="table-cell blank">Incompatible Controller Service Configured</div>'}else{O='<div class="table-cell value"><pre class="ellipsis">'+h.escapeHtml(P)+"</pre></div>"}}}}else{O='<span class="unset">No value set</span>'}var M=e(O);if(I.type==="required"){M.addClass("required")}M.find(".ellipsis").width(L.width-10).ellipsis();return e("<div/>").append(M).html()};var y=[{id:"property",field:"displayName",name:"Property",sortable:false,resizable:true,rerenderOnResize:true,formatter:D},{id:"value",field:"value",name:"Value",sortable:false,resizable:true,cssClass:"pointer",rerenderOnResize:true,formatter:E}];var C=function(R,O,N,L,K){var Q="";var P=G.data("descriptors");var M=P[K.property];var J=h.isDefinedAndNotNull(M.identifiesControllerService);var I=h.isDefinedAndNotNull(K.value);if(J&&I&&(H.supportsGoTo===true)){e.each(M.allowableValues,function(S,U){var T=U.allowableValue;if(T.value===K.value){Q+='<div class="pointer go-to-service fa fa-long-arrow-right" title="Go To"></div>';return false}})}if(H.readOnly!==true&&K.type==="userDefined"){Q+='<div title="Delete" class="delete-property pointer fa fa-trash"></div>'}return Q};y.push({id:"actions",name:"&nbsp;",minWidth:20,width:20,formatter:C});var z={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,editable:H.readOnly!==true,enableAddRow:false,autoEdit:false,rowHeight:24};var F=new r.Data.DataView({inlineFilters:false});F.setItems([]);F.setFilterArgs({searchString:"",property:"hidden"});F.setFilter(m);F.getItemMetadata=function(J){var L=F.getItem(J);var K=G.data("descriptors");var I=K[L.property];if(h.isUndefinedOrNull(I)||h.supportsEl(I)){return{columns:{value:{editor:d}}}}else{var M=h.getAllowableValues(I);if(e.isArray(M)){return{columns:{value:{editor:u}}}}else{return{columns:{value:{editor:p}}}}}};var B=function(I){e.ajax({type:"GET",url:"../nifi-api/controller-services/"+encodeURIComponent(I.value),dataType:"json"}).done(function(J){var L=G.closest(".dialog");if(L.hasClass("modal")){L.modal("hide")}else{L.hide()}var K=J.component;e.Deferred(function(M){if(h.isDefinedAndNotNull(K.parentGroupId)){if(e("#process-group-configuration").is(":visible")){l.loadConfiguration(K.parentGroupId).done(function(){M.resolve()})}else{l.showConfiguration(K.parentGroupId).done(function(){M.resolve()})}}else{if(e("#settings").is(":visible")){w.loadSettings().done(function(){M.resolve()})}else{w.showSettings().done(function(){M.resolve()})}}}).done(function(){if(h.isDefinedAndNotNull(K.parentGroupId)){l.selectControllerService(I.value)}else{w.selectControllerService(I.value)}})}).fail(g.handleAjaxError)};var A=new r.Grid(G,F,y,z);A.setSelectionModel(new r.RowSelectionModel());A.onClick.subscribe(function(M,I){if(A.getColumns()[I.cell].id==="value"){if(H.readOnly===true){var J=G.data("descriptors");c(A,J,I.row,I.cell)}else{A.gotoCell(I.row,I.cell,true)}M.stopImmediatePropagation()}else{if(A.getColumns()[I.cell].id==="actions"){var K=F.getItem(I.row);var L=e(M.target);if(L.hasClass("delete-property")){F.updateItem(K.id,e.extend(K,{hidden:true}));M.stopImmediatePropagation()}else{if(L.hasClass("go-to-service")){if(H.readOnly===true){B(K)}else{if(typeof H.goToServiceDeferred==="function"){H.goToServiceDeferred().done(function(){B(K)})}}}}}}});A.onKeyDown.subscribe(function(J,I){if(J.which===e.ui.keyCode.ESCAPE){var K=A.getEditorLock();if(K.isActive()){K.cancelCurrentEdit();J.stopImmediatePropagation();J.preventDefault()}}});if(H.readOnly!==true){A.onBeforeCellEditorDestroy.subscribe(function(J,I){setTimeout(function(){A.resizeCanvas()},50)})}F.onRowCountChanged.subscribe(function(J,I){A.updateRowCount();A.render()});F.onRowsChanged.subscribe(function(J,I){A.invalidateRows(I.rows);A.render()});G.data("gridInstance",A).on("mouseenter","div.slick-cell",function(P){var J=e(this).find("div.fa-question-circle");if(J.length&&!J.data("qtip")){var N=e(this).find("span.property-descriptor-name").text();var K=G.data("descriptors");var I=K[N];var O=G.data("history");var L=O[N];var M=h.formatPropertyTooltip(I,L);if(h.isDefinedAndNotNull(M)){J.qtip(e.extend({},h.config.tooltipConfig,{content:M}))}}})};var i=function(A){var z=A.data("gridInstance");if(h.isDefinedAndNotNull(z)){var y=z.getEditController();y.commitCurrentEdit()}};var m=function(z,y){return z.hidden===false};var a=function(D,A,B,E){D.data({descriptors:B,history:E});var y=D.data("gridInstance");var C=y.getData();if(h.isDefinedAndNotNull(A)){C.beginUpdate();var z=0;e.each(A,function(G,I){var J=B[G];var H="userDefined";var F=G;if(h.isDefinedAndNotNull(J)){if(h.isRequiredProperty(J)){H="required"}else{if(h.isDynamicProperty(J)){H="userDefined"}else{H="optional"}}F=J.displayName;if(h.isNull(I)&&h.isDefinedAndNotNull(J.defaultValue)){I=J.defaultValue}}C.addItem({id:z++,hidden:false,property:G,displayName:F,previousValue:I,value:I,type:H})});C.endUpdate()}};var o=function(C){var z=C.data("options");if(z.readOnly===true){q.removeAllPropertyDetailDialogs()}else{if(h.isDefinedAndNotNull(z.dialogContainer)){e("#new-property-dialog").modal("hide")}}var B=C.find("div.property-table");B.removeData("descriptors history");h.cleanUpTooltips(B,"div.fa-question-circle");var y=B.data("gridInstance");var A=y.getData();A.setItems([])};var t={init:function(y){return this.each(function(){if(h.isDefinedAndNotNull(y)){var D=e(this);D.empty().unbind().addClass("property-container").data("options",y);var C=e('<div class="properties-header"></div>').appendTo(D);e('<div class="required-property-note">Required field</div>').appendTo(C);var G=e('<div class="property-table"></div>').appendTo(D);if(y.readOnly!==true&&h.isDefinedAndNotNull(y.dialogContainer)){var A='<div id="new-property-dialog" class="dialog cancellable small-dialog hidden"><div class="dialog-content"><div><div class="setting-name">Property name</div><div class="setting-field new-property-name-container"><input class="new-property-name" type="text"/></div></div></div></div>';var z=e(A).appendTo(y.dialogContainer);var B=z.find("input.new-property-name");z.modal({headerText:"Add Property",scrollableContentStyle:"scrollable",buttons:[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){F()}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){H()}}}]});var F=function(){var I=e.trim(B.val());if(I!==""){var J=G.data("gridInstance");var L=J.getData();var K=null;e.each(L.getItems(),function(N,O){if(I===O.property){K=O;return false}});if(K===null){y.descriptorDeferred(I).done(function(N){var P=N.propertyDescriptor;var O=G.data("descriptors");if(!h.isUndefined(O)){O[P.name]=P}var R=L.getLength();L.addItem({id:R,hidden:false,property:I,displayName:I,previousValue:null,value:null,type:"userDefined"});var Q=L.getRowById(R);J.setActiveCell(Q,J.getColumnIndex("value"));J.editActiveCell()})}else{if(K.hidden===true){L.updateItem(K.id,e.extend(K,{hidden:false,previousValue:null,value:null}));var M=L.getRowById(K.id);J.setActiveCell(M,J.getColumnIndex("value"));J.editActiveCell()}else{n.showOkDialog({headerText:"Property Exists",dialogContent:"A property with this name already exists."});var M=L.getRowById(K.id);J.setSelectedRows([M]);J.scrollRowIntoView(M)}}}else{n.showOkDialog({headerText:"Property Name",dialogContent:"Property name must be specified."})}z.modal("hide")};var H=function(){z.modal("hide")};B.on("keydown",function(J){var I=J.keyCode?J.keyCode:J.which;if(I===e.ui.keyCode.ENTER){F();J.stopImmediatePropagation();J.preventDefault()}});z.on("click","div.new-property-ok",F).on("click","div.new-property-cancel",H);var E=e('<div class="add-property"></div>').appendTo(C);e('<button class="button fa fa-plus"></button>').on("click",function(){i(G);B.val("");z.modal("show");B.focus()}).appendTo(E)}e('<div class="clear"></div>').appendTo(C);v(G,y)}})},loadProperties:function(y,z,A){return this.each(function(){var B=e(this).find("div.property-table");a(B,y,z,A)})},saveRow:function(){return this.each(function(){var y=e(this).find("div.property-table");i(y)})},resetTableSize:function(){return this.each(function(){var z=e(this).find("div.property-table");var y=z.data("gridInstance");if(h.isDefinedAndNotNull(y)){y.resizeCanvas()}})},cancelEdit:function(){return this.each(function(){var A=e(this).find("div.property-table");var z=A.data("gridInstance");if(h.isDefinedAndNotNull(z)){var y=z.getEditController();y.cancelCurrentEdit()}})},destroy:function(){return this.each(function(){var z=e(this);var y=z.data("options");if(h.isDefinedAndNotNull(y)){o(z);if(h.isDefinedAndNotNull(y.dialogContainer)){e("#new-property-dialog").modal("hide");e(y.dialogContainer).children("div.new-inline-controller-service-dialog").remove()}}})},clear:function(){return this.each(function(){o(e(this))})},isSaveRequired:function(){var y=false;this.each(function(){var B=e(this).find("div.property-table");var z=B.data("gridInstance");var A=z.getData();e.each(A.getItems(),function(){if(this.value!==this.previousValue){y=true;return false}});return false});return y},marshalProperties:function(){var y={};this.each(function(){var B=e(this).find("div.property-table");var z=B.data("gridInstance");var A=z.getData();e.each(A.getItems(),function(){if(this.hidden===true){y[this.property]=null}else{if(this.value!==this.previousValue){y[this.property]=this.value}}});return false});return y},setGroupId:function(y){return this.each(function(){k=y})}};e.fn.propertytable=function(y){if(t[y]){return t[y].apply(this,Array.prototype.slice.call(arguments,1))}else{return t.init.apply(this,arguments)}}}));