(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","CodeMirror","nf"],function(e,c,d){b(e,c,d)})}else{if(typeof exports==="object"&&typeof module==="object"){b(require("jquery"),require("CodeMirror"),require("nf"))}else{b(a.$,a.CodeMirror,a.nf)}}}(this,function(h,f,d){var e=function(j){return typeof j==="undefined"};var a=function(j){return j===null};var i=function(j){return !e(j)&&!a(j)};var g=function(j){return e(j)||a(j)||j===""};var b=function(j){return typeof j==="function"};var c={init:function(j){return this.each(function(){if(e(j)||a(j)){return false}var n=j.languageId;var p=d[n];if(e(p)||a(p)){return false}var k=j.resizable===true;var t=j.sensitive===true;var s=i(j.content)?j.content:"";var u=h("<textarea></textarea>").text(s).appendTo(h(this));if(b(p.color)){f.commands.autocomplete=function(x){if(b(p.suggest)){f.showHint(x,d[n].suggest)}};f.defineMode(n,d[n].color);var v=j.readOnly===true;var r=f.fromTextArea(u.get(0),{mode:n,lineNumbers:true,matchBrackets:true,readOnly:v,extraKeys:{"Ctrl-Space":"autocomplete",Esc:function(x){if(b(j.escape)){j.escape()}},Enter:function(x){if(b(j.enter)){j.enter()}}}});var m=null;if(i(j.width)){m=j.width}var w=null;if(i(j.height)){w=j.height}r.setSize(m,w);h(this).data("editorInstance",r);var q=h(this).find(".CodeMirror");var l=q.find(".CodeMirror-code");if(k){q.append('<div class="ui-resizable-handle ui-resizable-se"></div>').resizable({handles:{se:".ui-resizable-se"},resize:function(){r.setSize(h(this).width(),h(this).height());r.refresh()}})}r.on("change",function(x,y){q.addClass("modified")});r.on("keyHandled",function(x,z,y){if(z==="Esc"){y.stopImmediatePropagation();y.preventDefault()}});if(t){l.addClass("sensitive");var o=function(x,y){if(l.hasClass("sensitive")){l.removeClass("sensitive");r.setValue("")}};r.on("mousedown",o);r.on("keydown",o)}if(i(j.minWidth)){q.resizable("option","minWidth",j.minWidth)}if(i(j.minHeight)){q.resizable("option","minHeight",j.minHeight)}}})},refresh:function(){return this.each(function(){var j=h(this).data("editorInstance");if(i(j)){j.refresh()}})},setSize:function(k,j){return this.each(function(){var l=h(this).data("editorInstance");if(i(l)){l.setSize(k,j)}})},getValue:function(){var j;this.each(function(){var k=h(this).data("editorInstance");if(i(k)){j=k.getValue()}return false});return j},setValue:function(j){return this.each(function(){var k=h(this).data("editorInstance");if(i(k)){k.setValue(j);h(this).find(".CodeMirror").removeClass("modified")}})},focus:function(){return this.each(function(){var j=h(this).data("editorInstance");if(i(j)){j.focus()}})},selectAll:function(){return this.each(function(){var j=h(this).data("editorInstance");if(i(j)){j.execCommand("selectAll")}})},isModified:function(){var j;this.each(function(){j=h(this).find(".CodeMirror").hasClass("modified");return false});return j},destroy:function(){return this.removeData("editorInstance").find(".CodeMirror").removeClass("modified")}};h.fn.nfeditor=function(j){if(c[j]){return c[j].apply(this,Array.prototype.slice.call(arguments,1))}else{return c.init.apply(this,arguments)}}}));